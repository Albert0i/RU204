
### Data 101 

### I. RU101
#### 1. Using python data loader 
Go ahead and load the data as follows:
```
$ git clone https://github.com/redislabs-training/ru101.git
$ cd ru101
$ export PYTHONPATH=`pwd`
$ python3 -m venv venv
$ . venv/bin/activate
$ pip install -r requirements.txt

$ export REDIS_HOST=myredishost
$ export REDIS_PORT=9999
$ export REDIS_PASSWORD=ssssh

$ cd redisu
$ python utils/dumpload.py load ru101/data/ru101.json
```

#### 2. Replacing the data store
In case you are local server is [Redis 7.2.4](https://redis.io/docs/latest/operate/rs/release-notes/rs-7-2-4-releases/), download the `ru101.rdb` from: 
```
https://storage.googleapis.com/redis-university-assets/ru101/ru101.rdb.gz
```
The ".rdb" file is used by Redis to persistently store data on disk. It serves as a point-in-time snapshot of the Redis dataset. The data in Redis, which is primarily stored in memory, is periodically saved to disk in the ".rdb" format to provide durability and allow data recovery in case of system failures or restarts.

When Redis restarts, it can load the data from the ".rdb" file back into memory, restoring the database state to the point of the last snapshot. This process is known as RDB (Redis DataBase) loading.
(Generated by Chat-GPT)

Find out the location and name of your redis data store from [`redis.conf`](https://redis.io/docs/latest/operate/oss_and_stack/management/config-file/):

redis.conf
```
# Save the DB to disk.
#
# save <seconds> <changes> [<seconds> <changes> ...]
#
# Redis will save the DB if the given number of seconds elapsed and it
# surpassed the given number of write operations against the DB.
#
# Snapshotting can be completely disabled with a single empty string argument
# as in following example:
#
# save ""
#
# Unless specified otherwise, by default Redis will save the DB:
#   * After 3600 seconds (an hour) if at least 1 change was performed
#   * After 300 seconds (5 minutes) if at least 100 changes were performed
#   * After 60 seconds if at least 10000 changes were performed
#
# You can set these explicitly by uncommenting the following line.
#
# save 3600 1 300 100 60 10000

# By default Redis will stop accepting writes if RDB snapshots are enabled
# (at least one save point) and the latest background save failed.
# This will make the user aware (in a hard way) that data is not persisting
# on disk properly, otherwise chances are that no one will notice and some
# disaster will happen.
#
# If the background saving process will start working again Redis will
# automatically allow writes again.
#
# However if you have setup your proper monitoring of the Redis server
# and persistence, you may want to disable this feature so that Redis will
# continue to work as usual even if there are problems with disk,
# permissions, and so forth.
stop-writes-on-bgsave-error yes

# Compress string objects using LZF when dump .rdb databases?
# By default compression is enabled as it's almost always a win.
# If you want to save some CPU in the saving child set it to 'no' but
# the dataset will likely be bigger if you have compressible values or keys.
rdbcompression yes

# Since version 5 of RDB a CRC64 checksum is placed at the end of the file.
# This makes the format more resistant to corruption but there is a performance
# hit to pay (around 10%) when saving and loading RDB files, so you can disable it
# for maximum performances.
#
# RDB files created with checksum disabled have a checksum of zero that will
# tell the loading code to skip the check.
rdbchecksum yes

# Enables or disables full sanitization checks for ziplist and listpack etc when
# loading an RDB or RESTORE payload. This reduces the chances of a assertion or
# crash later on while processing commands.
# Options:
#   no         - Never perform full sanitization
#   yes        - Always perform full sanitization
#   clients    - Perform full sanitization only for user connections.
#                Excludes: RDB files, RESTORE commands received from the master
#                connection, and client connections which have the
#                skip-sanitize-payload ACL flag.
# The default should be 'clients' but since it currently affects cluster
# resharding via MIGRATE, it is temporarily set to 'no' by default.
#
# sanitize-dump-payload no

# The filename where to dump the DB
dbfilename dump.rdb

# Remove RDB files used by replication in instances without persistence
# enabled. By default this option is disabled, however there are environments
# where for regulations or other security concerns, RDB files persisted on
# disk by masters in order to feed replicas, or stored on disk by replicas
# in order to load them for the initial synchronization, should be deleted
# ASAP. Note that this option ONLY WORKS in instances that have both AOF
# and RDB persistence disabled, otherwise is completely ignored.
#
# An alternative (and sometimes better) way to obtain the same effect is
# to use diskless replication on both master and replicas instances. However
# in the case of replicas, diskless is not always an option.
rdb-del-sync-files no

# The working directory.
#
# The DB will be written inside this directory, with the filename specified
# above using the 'dbfilename' configuration directive.
#
# The Append Only File will also be created inside this directory.
#
# Note that you must specify a directory here, not a file name.
dir ./
```
In the above settings, data store name is `dump.rdb` and located in the same folder of the `redis-server` program. 
Shut down your redis server, replace the *.rdb file and restart. 


### II. RU102JS: Using python data loader 
To load sample site data and sample metrics, run:
```
npm run load src/resources/data/sites.json flushdb
```
`flushdb` is optional, and will erase ALL data from Redis before inserting the sample data.

package.json 
```
{
  . . .
    "load": "node src/utils/data_loader.js --",
  . . .
}
```


### III. RU103: Using Redis-Cli
To load this data, run the following command from your terminal: 
```
redis-cli < commands.redis > output.txt
```


### IV. RU204: Using python data loader 
First, with your shell in the ru204 folder create a Python virtual environment, activate it and install the dependencies required to run the data loader:
```
python3 -m venv venv
. ./venv/bin/activate
pip install -r requirements.txt
```

Now run the data loader script, passing it the name of the folder containing the JSON data files to load into Redis.
```
python data_loader.py --dir data/books --redis redis://default:password@host:port/
```

The commands you provided are used to create a virtual environment in Python and install packages from a requirements.txt file. Here's a breakdown of each command:

1. `python3 -m venv venv`: This command creates a virtual environment named "venv" using Python 3. It sets up a self-contained environment where you can install packages without affecting the system-wide Python installation.

2. `. ./venv/bin/activate`: This command activates the virtual environment. The leading dot (`.`) is shorthand for the `source` command. By running this command, you activate the virtual environment and make it the active Python environment in your current shell session.

3. `pip install -r requirements.txt`: This command installs the Python packages listed in the requirements.txt file. The `-r` flag specifies that you want to install packages from a requirements file, and `requirements.txt` is the file containing the package names and versions.

By following these steps, you'll create a virtual environment, activate it, and install the packages specified in the requirements.txt file into that environment. This helps isolate your project's dependencies and ensures consistent package versions.

After you have finished working with the virtual environment, you can deactivate it and optionally remove it to clean up the environment. Here's how you can perform the cleanup steps:

1. Deactivating the virtual environment:
   
   To deactivate the virtual environment, simply run the following command:

   ```shell
   deactivate
   ```

   This command will deactivate the virtual environment and return you to the system's default Python environment.

2. Removing the virtual environment (optional):
   
   If you want to remove the virtual environment and delete all its files, you can simply delete the directory where the virtual environment was created. In your case, you can remove the `venv` directory by running:

   ```shell
   rm -r venv
   ```

   This command will remove the `venv` directory and all its contents.

It's good practice to clean up the virtual environment once you're done with it, especially if you don't plan to use it in the future. By removing the virtual environment, you free up disk space and can avoid confusion when working on other projects. 
(Generated by Chat-GPT)


### V. 
```
```


### EOF (2024/04/16)